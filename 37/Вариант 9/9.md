```python
import random

# ============== Великий Шифр Россиньоля (симметричный) ==============
class GreatCipher:
    def __init__(self, key):
        self.key = key
        self.alphabet = "АБВГДЕЁЖЗИЙКЛМНОПРСТУФХЦЧШЩЪЫЬЭЮЯабвгдеёжзийклмнопрстуфхцчшщъыьэюя .,!?"
        self.cipher_dict = {}
        self.reverse_dict = {}
        self.make_dict()
    
    def make_dict(self):
        random.seed(self.key)
        shuffled = list(self.alphabet)
        random.shuffle(shuffled)
        
        for i in range(len(self.alphabet)):
            self.cipher_dict[self.alphabet[i]] = shuffled[i]
            self.reverse_dict[shuffled[i]] = self.alphabet[i]
    
    def encrypt(self, text):
        result = []
        for char in text:
            if char in self.cipher_dict:
                result.append(self.cipher_dict[char])
            else:
                result.append(char)
        return ''.join(result)
    
    def decrypt(self, text):
        result = []
        for char in text:
            if char in self.reverse_dict:
                result.append(self.reverse_dict[char])
            else:
                result.append(char)
        return ''.join(result)

# ============== Простой RSA (аналог Дамгорда-Юрика) ==============
class SimpleRSA:
    def __init__(self, key):
        random.seed(key)
        self.p = self.get_prime()
        self.q = self.get_prime()
        self.n = self.p * self.q
        self.phi = (self.p - 1) * (self.q - 1)
        self.e = self.get_e()
        self.d = self.get_d()
    
    def get_prime(self):
        primes = [101, 103, 107, 109, 113, 127, 131, 137, 139, 149]
        return random.choice(primes)
    
    def get_e(self):
        for e in range(2, self.phi):
            if self.gcd(e, self.phi) == 1:
                return e
        return 65537
    
    def gcd(self, a, b):
        while b != 0:
            a, b = b, a % b
        return a
    
    def get_d(self):
        for d in range(3, self.phi):
            if (d * self.e) % self.phi == 1:
                return d
        return 1
    
    def mod_pow(self, base, exp, mod):
        result = 1
        while exp > 0:
            if exp % 2 == 1:
                result = (result * base) % mod
            base = (base * base) % mod
            exp //= 2
        return result
    
    def encrypt(self, text):
        numbers = [ord(char) for char in text]
        encrypted = [self.mod_pow(num, self.e, self.n) for num in numbers]
        return ' '.join(str(num) for num in encrypted)
    
    def decrypt(self, cipher_text):
        numbers = list(map(int, cipher_text.split()))
        decrypted = [self.mod_pow(num, self.d, self.n) for num in numbers]
        return ''.join(chr(num) for num in decrypted)

# ============== Основная программа ==============
def main():
    print("=== Лабораторная работа 9. Криптоалгоритмы ===\n")
    
    # Ввод ключа
    user_key = input("Введите ключ (например: фф12К52): ")
    
    # Создание шифров
    cipher1 = GreatCipher(user_key)
    cipher2 = SimpleRSA(user_key)
    
    # Ввод текста
    text = input("\nВведите текст для шифрования: ")
    
    # Шифрование Великим Шифром Россиньоля
    print("\n--- Великий Шифр Россиньоля ---")
    enc1 = cipher1.encrypt(text)
    print(f"Зашифрованный: {enc1}")
    dec1 = cipher1.decrypt(enc1)
    print(f"Расшифрованный: {dec1}")
    print(f"Совпадает с исходным? {text == dec1}")
    
    # Шифрование RSA (упрощенный Дамгорда-Юрика)
    print("\n--- RSA (Дамгорда-Юрика) ---")
    enc2 = cipher2.encrypt(text)
    print(f"Зашифрованный (числа): {enc2}")
    dec2 = cipher2.decrypt(enc2)
    print(f"Расшифрованный: {dec2}")
    print(f"Совпадает с исходным? {text == dec2}")
    
    # Информация о ключах RSA
    print(f"\nИнформация о RSA ключах:")
    print(f"p = {cipher2.p}, q = {cipher2.q}")
    print(f"n = {cipher2.n}, φ(n) = {cipher2.phi}")
    print(f"e = {cipher2.e}, d = {cipher2.d}")

if __name__ == "__main__":
    main()
```

    === Лабораторная работа 9. Криптоалгоритмы ===
    
    
    --- Великий Шифр Россиньоля ---
    Зашифрованный: мёйЖёйифсы
    Расшифрованный: Я ем енота
    Совпадает с исходным? True
    
    --- RSA (Дамгорда-Юрика) ---
    Зашифрованный (числа): 12734 3450 3553 10876 3450 3553 6478 8590 8963 12206
    Расшифрованный: Я ем енота
    Совпадает с исходным? True
    
    Информация о RSA ключах:
    p = 137, q = 107
    n = 14659, φ(n) = 14416
    e = 3, d = 9611
    
